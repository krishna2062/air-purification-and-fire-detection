<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedules | AirPure Operations</title>
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700&family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="schedule.css">
</head>

<body class="sched-body">
    <div id="navbar-placeholder"></div>
    <script src="js/navbar-loader.js"></script>

    <!-- Header -->
    <header class="sched-header">
        <div class="header-brand">
            <i class="fas fa-calendar-alt"></i>
            <div>
                <h1>OPERATIONS SCHEDULE</h1>
                <span class="subtitle">Time-Based Automation Controller</span>
            </div>
        </div>

        <div class="header-status">
            <div class="clock-display">
                <span id="liveTime" class="time">00:00:00</span>
                <span id="liveDate" class="date">YYYY-MM-DD</span>
            </div>

            <div class="status-indicator active" id="schedStatus">
                <span class="label">SCHEDULER</span>
                <span class="value">ACTIVE</span>
            </div>

            <a href="index.html" class="btn-close"><i class="fas fa-times"></i></a>
        </div>
    </header>

    <main class="sched-grid">

        <!-- Timeline View -->
        <section class="panel timeline-panel">
            <div class="panel-head">
                <h3><i class="fas fa-stream"></i> 24-HOUR TIMELINE</h3>
                <div class="legend">
                    <span class="l-item"><span class="dot air"></span> Air</span>
                    <span class="l-item"><span class="dot fire"></span> Safety</span>
                    <span class="l-item"><span class="dot maint"></span> Maint</span>
                </div>
            </div>
            <div class="timeline-container">
                <div class="timeline-track" id="timelineTrack">
                    <!-- Markers generated by JS -->
                    <div class="current-time-line" id="currentTimeLine"></div>
                </div>
                <div class="timeline-labels">
                    <span>00:00</span><span>06:00</span><span>12:00</span><span>18:00</span><span>23:59</span>
                </div>
            </div>
        </section>

        <!-- Left: Task Creator -->
        <section class="panel creator-panel">
            <div class="panel-head">
                <h3><i class="fas fa-plus-circle"></i> CREATE NEW TASK</h3>
            </div>

            <div class="form-container">
                <div class="form-group">
                    <label>Task Name</label>
                    <input type="text" id="taskName" placeholder="e.g. Night Mode Activation">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Device / System</label>
                        <select id="taskDevice">
                            <option value="purifier">Air Purifier</option>
                            <option value="fan">Ventilation Fan</option>
                            <option value="alarm">Fire Alarm System</option>
                            <option value="system">Full System</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Action</label>
                        <select id="taskAction">
                            <option value="on">Turn ON</option>
                            <option value="off">Turn OFF</option>
                            <option value="silent">Set Silent Mode</option>
                            <option value="boost">Filter Boost</option>
                            <option value="test_self">Run Self Test</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Time (24h)</label>
                        <input type="time" id="taskTime">
                    </div>
                    <div class="form-group">
                        <label>Repeat</label>
                        <select id="taskRepeat">
                            <option value="once">One Time</option>
                            <option value="daily">Daily</option>
                            <option value="weekdays">Weekdays (M-F)</option>
                            <option value="weekends">Weekends</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Priority Class</label>
                    <div class="priority-selector">
                        <label class="radio-label">
                            <input type="radio" name="priority" value="low" checked> <span
                                class="p-tag low">Standard</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="priority" value="high"> <span class="p-tag high">Critical</span>
                        </label>
                    </div>
                </div>

                <button class="btn-create" onclick="addTask()">
                    <i class="fas fa-save"></i> SCHEDULE TASK
                </button>
            </div>
        </section>

        <!-- Right: Active List & Logs -->
        <div class="right-col">
            <!-- Active Tasks -->
            <section class="panel list-panel">
                <div class="panel-head">
                    <h3><i class="fas fa-tasks"></i> ACTIVE SCHEDULES</h3>
                    <span class="badge" id="taskCount">0</span>
                </div>
                <div class="task-list" id="taskList">
                    <!-- Tasks Here -->
                    <div class="empty-state">No scheduled tasks</div>
                </div>
            </section>

            <!-- Execution Simulator -->
            <section class="panel simulator-panel">
                <div class="panel-head">
                    <h3><i class="fas fa-terminal"></i> EXECUTION LOG</h3>
                    <div class="sim-controls">
                        <button class="btn-sim" onclick="toggleSim()">Test: Fast Forward 1h</button>
                    </div>
                </div>
                <div class="console-log" id="execLog">
                    <div class="log-entry sys">Scheduler Service Online...</div>
                    <div class="log-entry sys">Waiting for time triggers...</div>
                </div>
            </section>
        </div>

        <!-- System Controls -->
        <section class="footer-panel">
            <div class="footer-info">
                <i class="fas fa-shield-alt"></i> Safety Lock: <span class="safe">ACTIVE</span> (Critical tasks cannot
                be deleted)
            </div>
            <div class="footer-actions">
                <button class="btn-footer warning" onclick="pauseAll()"><i class="fas fa-pause"></i> Pause All</button>
                <button class="btn-footer" onclick="saveToMemory()"><i class="fas fa-download"></i> Save &
                    Export</button>
            </div>
        </section>

    </main>

    <div id="toast" class="toast hidden">Task Scheduled Successfully</div>

    <script src="schedule.js"></script>
</body>

</html>